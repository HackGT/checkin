var app=angular.module("checkin",["ui.router"]);app.config(["$httpProvider","SERVER_URL",function(e,n){e.defaults.headers.common["Access-Control-Allow-Origin"]="*",e.interceptors.push(function(){return{request:function(e){return 0!==e.url.indexOf("api/")&&0!==e.url.indexOf("auth/")||(e.url=n.BASE_URL+e.url,e.headers["Access-Control-Allow-Origin"]="*"),console.log(e),e}}})}]),angular.module("checkin").config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("login",{url:"/login",templateUrl:"views/login/login.html",controller:"LoginController"}).state("checkin",{url:"/checkin",templateUrl:"views/checkin/checkin.html"})}]),angular.module("checkin").factory("AuthService",["$q","$http","$rootScope","$state","Session",function(e,n,o,t,r){function l(n){return console.log("auth success",n),r.create(n.token,n.user),e(function(e){e(n.user)})}function c(n,o){return console.log("auth fail",n),t.go("login"),e(function(e,o){o(n)})}var i={};return i.loginWithPassword=function(e,o){return n.post("auth/login",{email:e,password:o}).then(function(e){return e.data}).then(l,c)},i.loginWithToken=function(e){return n.post("auth/login",{token:e}).then(function(e){return e.data}).then(l,function(e){console.log(e)})},i}]),angular.module("checkin").service("Session",["$rootScope","$window",function(e,n){this.create=function(o,t){n.localStorage.jwt=o,n.localStorage.userId=t._id,n.localStorage.currentUser=JSON.stringify(t),e.currentUser=t},this.destroy=function(o){delete n.localStorage.jwt,delete n.localStorage.userId,delete n.localStorage.currentUser,e.currentUser=null,o&&o()},this.getToken=function(){return n.localStorage.jwt},this.getUserId=function(){return n.localStorage.userId},this.getUser=function(){return JSON.parse(n.localStorage.currentUser)}}]),angular.module("checkin").controller("LoginController",["$scope","AuthService",function(e,n){function o(e){console.log("success",e)}function t(e){console.log("failure",e)}e.login=function(){n.loginWithPassword(e.email,e.password).then(o,t)}}]),angular.module("checkin").constant("SERVER_URL",{BASE_URL:"http://f4819ebc.ngrok.io/"});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInJvdXRlcy5qcyIsImF1dGgvQXV0aFNlcnZpY2UuanMiLCJzZXNzaW9uL1Nlc3Npb24uanMiLCJsb2dpbi9sb2dpbkNvbnRyb2xsZXIuanMiLCJjb25maWcuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRodHRwUHJvdmlkZXIiLCJTRVJWRVJfVVJMIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInJlcXVlc3QiLCJ1cmwiLCJpbmRleE9mIiwiQkFTRV9VUkwiLCJjb25zb2xlIiwibG9nIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImZhY3RvcnkiLCIkcSIsIiRodHRwIiwiJHJvb3RTY29wZSIsIiRzdGF0ZSIsIlNlc3Npb24iLCJsb2dpblN1Y2Nlc3MiLCJkYXRhIiwiY3JlYXRlIiwidG9rZW4iLCJ1c2VyIiwicmVzb2x2ZSIsImxvZ2luRmFpbHVyZSIsImNhbGxiYWNrIiwiZ28iLCJyZWplY3QiLCJhdXRoU2VydmljZSIsImxvZ2luV2l0aFBhc3N3b3JkIiwiZW1haWwiLCJwYXNzd29yZCIsInBvc3QiLCJ0aGVuIiwicmVzcG9uc2UiLCJsb2dpbldpdGhUb2tlbiIsInNlcnZpY2UiLCIkd2luZG93IiwidGhpcyIsImxvY2FsU3RvcmFnZSIsImp3dCIsInVzZXJJZCIsIl9pZCIsImN1cnJlbnRVc2VyIiwiSlNPTiIsInN0cmluZ2lmeSIsImRlc3Ryb3kiLCJvbkNvbXBsZXRlIiwiZ2V0VG9rZW4iLCJnZXRVc2VySWQiLCJnZXRVc2VyIiwicGFyc2UiLCIkc2NvcGUiLCJBdXRoU2VydmljZSIsIm9uU3VjY2VzcyIsIm9uRmFpbHVyZSIsImxvZ2luIiwiY29uc3RhbnQiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsV0FDQSxhQUdBRixLQUFBRyxRQUNBLGdCQUNBLGFBQ0EsU0FBQUMsRUFBQUMsR0FDQUQsRUFBQUUsU0FBQUMsUUFBQUMsT0FBQSwrQkFBQSxJQUdBSixFQUFBSyxhQUFBQyxLQUFBLFdBQ0EsT0FDQUMsUUFBQSxTQUFBUixHQU1BLE1BTEEsS0FBQUEsRUFBQVMsSUFBQUMsUUFBQSxTQUFBLElBQUFWLEVBQUFTLElBQUFDLFFBQUEsV0FDQVYsRUFBQVMsSUFBQVAsRUFBQVMsU0FBQVgsRUFBQVMsSUFDQVQsRUFBQUksUUFBQSwrQkFBQSxLQUVBUSxRQUFBQyxJQUFBYixHQUNBQSxTQ25CQUYsUUFBQUMsT0FBQSxXQUNBQyxRQUNBLGlCQUNBLHFCQUNBLFNBQ0FjLEVBQ0FDLEdBQ0FELEVBQ0FFLE1BQUEsU0FDQVAsSUFBQSxTQUNBUSxZQUFBLHlCQUNBQyxXQUFBLG9CQUVBRixNQUFBLFdBQ0FQLElBQUEsV0FDQVEsWUFBQSxrQ0NmQW5CLFFBQUFDLE9BQUEsV0FDQW9CLFFBQUEsZUFDQSxLQUNBLFFBQ0EsYUFDQSxTQUNBLFVBQ0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FHQSxRQUFBQyxHQUFBQyxHQUdBLE1BRkFkLFNBQUFDLElBQUEsZUFBQWEsR0FDQUYsRUFBQUcsT0FBQUQsRUFBQUUsTUFBQUYsRUFBQUcsTUFDQVQsRUFBQSxTQUFBVSxHQUNBQSxFQUFBSixFQUFBRyxRQUlBLFFBQUFFLEdBQUFMLEVBQUFNLEdBR0EsTUFGQXBCLFNBQUFDLElBQUEsWUFBQWEsR0FDQUgsRUFBQVUsR0FBQSxTQUNBYixFQUFBLFNBQUFVLEVBQUFJLEdBQ0FBLEVBQUFSLEtBZEEsR0FBQVMsS0F3Q0EsT0FyQkFBLEdBQUFDLGtCQUFBLFNBQUFDLEVBQUFDLEdBQ0EsTUFBQWpCLEdBQ0FrQixLQUFBLGNBQ0FGLE1BQUFBLEVBQ0FDLFNBQUFBLElBRUFFLEtBQUEsU0FBQUMsR0FBQSxNQUFBQSxHQUFBZixPQUNBYyxLQUFBZixFQUFBTSxJQUdBSSxFQUFBTyxlQUFBLFNBQUFkLEdBQ0EsTUFBQVAsR0FDQWtCLEtBQUEsY0FDQVgsTUFBQUEsSUFFQVksS0FBQSxTQUFBQyxHQUFBLE1BQUFBLEdBQUFmLE9BQ0FjLEtBQUFmLEVBQUEsU0FBQUMsR0FDQWQsUUFBQUMsSUFBQWEsTUFJQVMsS0NoREFyQyxRQUFBQyxPQUFBLFdBQ0E0QyxRQUFBLFdBQ0EsYUFDQSxVQUNBLFNBQUFyQixFQUFBc0IsR0FDQUMsS0FBQWxCLE9BQUEsU0FBQUMsRUFBQUMsR0FDQWUsRUFBQUUsYUFBQUMsSUFBQW5CLEVBQ0FnQixFQUFBRSxhQUFBRSxPQUFBbkIsRUFBQW9CLElBQ0FMLEVBQUFFLGFBQUFJLFlBQUFDLEtBQUFDLFVBQUF2QixHQUNBUCxFQUFBNEIsWUFBQXJCLEdBR0FnQixLQUFBUSxRQUFBLFNBQUFDLFNBQ0FWLEdBQUFFLGFBQUFDLFVBQ0FILEdBQUFFLGFBQUFFLGFBQ0FKLEdBQUFFLGFBQUFJLFlBQ0E1QixFQUFBNEIsWUFBQSxLQUNBSSxHQUNBQSxLQUlBVCxLQUFBVSxTQUFBLFdBQ0EsTUFBQVgsR0FBQUUsYUFBQUMsS0FHQUYsS0FBQVcsVUFBQSxXQUNBLE1BQUFaLEdBQUFFLGFBQUFFLFFBR0FILEtBQUFZLFFBQUEsV0FDQSxNQUFBTixNQUFBTyxNQUFBZCxFQUFBRSxhQUFBSSxpQkMvQkFwRCxRQUFBQyxPQUFBLFdBQ0FtQixXQUFBLG1CQUNBLFNBQ0EsY0FDQSxTQUFBeUMsRUFBQUMsR0FFQSxRQUFBQyxHQUFBbkMsR0FDQWQsUUFBQUMsSUFBQSxVQUFBYSxHQUdBLFFBQUFvQyxHQUFBcEMsR0FDQWQsUUFBQUMsSUFBQSxVQUFBYSxHQUdBaUMsRUFBQUksTUFBQSxXQUNBSCxFQUFBeEIsa0JBQ0F1QixFQUFBdEIsTUFBQXNCLEVBQUFyQixVQUNBRSxLQUFBcUIsRUFBQUMsT0NkQWhFLFFBQUFDLE9BQUEsV0FBQWlFLFNBQUEsY0FDQXJELFNBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdjaGVja2luJywgW1xuICAndWkucm91dGVyJyxcbl0pO1xuXG5hcHAuY29uZmlnKFtcbiAgJyRodHRwUHJvdmlkZXInLFxuICAnU0VSVkVSX1VSTCcsXG4gIGZ1bmN0aW9uKCRodHRwUHJvdmlkZXIsIFNFUlZFUl9VUkwpIHtcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSA9ICcqJztcblxuICAgIC8vIGFkZCByb290IHVybCB0byBhbGwgYXBpIGFuZCBhdXRoIHJlcXVlc3RzXG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgICAgICAgIGlmIChjb25maWcudXJsLmluZGV4T2YoJ2FwaS8nKSA9PT0gMCB8fCBjb25maWcudXJsLmluZGV4T2YoJ2F1dGgvJykgPT09IDApIHtcbiAgICAgICAgICAgIGNvbmZpZy51cmwgPSBTRVJWRVJfVVJMLkJBU0VfVVJMICsgY29uZmlnLnVybDtcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSA9ICcqJztcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2coY29uZmlnKTtcbiAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdjaGVja2luJylcbiAgLmNvbmZpZyhbXG4gICAgJyRzdGF0ZVByb3ZpZGVyJyxcbiAgICAnJHVybFJvdXRlclByb3ZpZGVyJyxcbiAgICBmdW5jdGlvbihcbiAgICAgICRzdGF0ZVByb3ZpZGVyLFxuICAgICAgJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgLnN0YXRlKCdsb2dpbicsIHtcbiAgICAgICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9sb2dpbi9sb2dpbi5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5zdGF0ZSgnY2hlY2tpbicsIHtcbiAgICAgICAgICAgIHVybDogJy9jaGVja2luJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvY2hlY2tpbi9jaGVja2luLmh0bWwnLFxuICAgICAgICAgIH0pO1xuICAgIH1cbiAgXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnY2hlY2tpbicpXG4gIC5mYWN0b3J5KCdBdXRoU2VydmljZScsIFtcbiAgICAnJHEnLFxuICAgICckaHR0cCcsXG4gICAgJyRyb290U2NvcGUnLFxuICAgICckc3RhdGUnLFxuICAgICdTZXNzaW9uJyxcbiAgICBmdW5jdGlvbigkcSwgJGh0dHAsICRyb290U2NvcGUsICRzdGF0ZSwgU2Vzc2lvbikge1xuICAgICAgdmFyIGF1dGhTZXJ2aWNlID0ge307XG5cbiAgICAgIGZ1bmN0aW9uIGxvZ2luU3VjY2VzcyhkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdhdXRoIHN1Y2Nlc3MnLCBkYXRhKTtcbiAgICAgICAgU2Vzc2lvbi5jcmVhdGUoZGF0YS50b2tlbiwgZGF0YS51c2VyKTtcbiAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgICAgICByZXNvbHZlKGRhdGEudXNlcik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBsb2dpbkZhaWx1cmUoZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2F1dGggZmFpbCcsIGRhdGEpO1xuICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICByZWplY3QoZGF0YSk7XG4gICAgICAgIH0pO1xuXG4gICAgICB9XG5cbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ2luV2l0aFBhc3N3b3JkID0gZnVuY3Rpb24oZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAgIC5wb3N0KCdhdXRoL2xvZ2luJywge1xuICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsgcmV0dXJuIHJlc3BvbnNlLmRhdGE7IH0pXG4gICAgICAgICAgLnRoZW4obG9naW5TdWNjZXNzLCBsb2dpbkZhaWx1cmUpO1xuICAgICAgfTtcblxuICAgICAgYXV0aFNlcnZpY2UubG9naW5XaXRoVG9rZW4gPSBmdW5jdGlvbih0b2tlbikge1xuICAgICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgICAucG9zdCgnYXV0aC9sb2dpbicsIHtcbiAgICAgICAgICAgIHRva2VuOiB0b2tlblxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsgcmV0dXJuIHJlc3BvbnNlLmRhdGE7IH0pXG4gICAgICAgICAgLnRoZW4obG9naW5TdWNjZXNzLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBhdXRoU2VydmljZTtcbiAgICB9XG4gIF0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2NoZWNraW4nKVxuICAuc2VydmljZSgnU2Vzc2lvbicsIFtcbiAgICAnJHJvb3RTY29wZScsXG4gICAgJyR3aW5kb3cnLFxuICAgIGZ1bmN0aW9uKCRyb290U2NvcGUsICR3aW5kb3cpe1xuICAgICAgdGhpcy5jcmVhdGUgPSBmdW5jdGlvbih0b2tlbiwgdXNlcil7XG4gICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dCA9IHRva2VuO1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS51c2VySWQgPSB1c2VyLl9pZDtcbiAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIgPSBKU09OLnN0cmluZ2lmeSh1c2VyKTtcbiAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlciA9IHVzZXI7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbihvbkNvbXBsZXRlKXtcbiAgICAgICAgZGVsZXRlICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dDtcbiAgICAgICAgZGVsZXRlICR3aW5kb3cubG9jYWxTdG9yYWdlLnVzZXJJZDtcbiAgICAgICAgZGVsZXRlICR3aW5kb3cubG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyO1xuICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyID0gbnVsbDtcbiAgICAgICAgaWYgKG9uQ29tcGxldGUpe1xuICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5nZXRUb2tlbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3Q7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmdldFVzZXJJZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS51c2VySWQ7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmdldFVzZXIgPSBmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSgkd2luZG93LmxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcik7XG4gICAgICB9O1xuICB9XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnY2hlY2tpbicpXG4gIC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBbXG4gICAgJyRzY29wZScsXG4gICAgJ0F1dGhTZXJ2aWNlJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsIEF1dGhTZXJ2aWNlKSB7XG5cbiAgICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzdWNjZXNzJywgZGF0YSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uRmFpbHVyZShkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmYWlsdXJlJywgZGF0YSk7XG4gICAgICB9XG5cbiAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBBdXRoU2VydmljZS5sb2dpbldpdGhQYXNzd29yZChcbiAgICAgICAgICAkc2NvcGUuZW1haWwsICRzY29wZS5wYXNzd29yZFxuICAgICAgICApLnRoZW4ob25TdWNjZXNzLCBvbkZhaWx1cmUpO1xuICAgICAgfTtcbiAgICB9XG4gIF0pO1xuIiwiLyoqXG4gKiBIZXJlIGxheSB0aGUgYmFzZSB1cmxzIHVzZWQgaW4gdGhlIGh0dHAgdXJsIGluamVjdG9yXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdjaGVja2luJykuY29uc3RhbnQoJ1NFUlZFUl9VUkwnLCB7XG4gIEJBU0VfVVJMOiAgJ2h0dHA6Ly9mNDgxOWViYy5uZ3Jvay5pby8nLFxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
